<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Physics. Computers. Code.: Basics of Clojure - Watching an Atom (Part 5)</title>
    <link rel="canonical" href="http://blogawesome.com/posts-output/basics-of-clojure5/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='http://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700' rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Physics. Computers. Code.</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li ><a href="/">Home</a></li>
                <li
                ><a href="/archives/">Archives</a></li>
                
                <li
                >
                <a href="/pages-output/about/">About</a>
                </li>
                
                <li><a href="/feed.xml">RSS</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                        More <span class="caret"></span></a>
                    <ul class="dropdown-menu" role="menu">
                        <li class="dropdown-header">Links</li>
                        <li><a href="http://smsalman.com">WordPress Site</a></li>
                        <li><a href="https://github.com/defunSM">My GitHub</a></li>
                        
                        <li><a href="/pages-output/another-page/">More About Me</a></li>
                        

                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Recent Posts</li>
                        
                        <li><a href="/posts-output/intro-to-haskell/">Haskell - Introduction</a></li>
                        
                        <li><a href="/posts-output/basics-of-clojure5/">Basics of Clojure - Watching an Atom (Part 5)</a></li>
                        
                        <li><a href="/posts-output/basics-of-clojurepart4/">Basics of Clojure - Atoms (Part 4)</a></li>
                        
                        

                        
                        <li class="divider"></li>
                        <li class="dropdown-header">Tags</li>
                        
                        <li><a href="/tags-output/Computers/">Computers</a></li>
                        
                        <li><a href="/tags-output/Graphics/">Graphics</a></li>
                        
                        <li><a href="/tags-output/Pathfinding/">Pathfinding</a></li>
                        
                        <li><a href="/tags-output/Clojure Guide Code/">Clojure Guide Code</a></li>
                        
                        <li><a href="/tags-output/Blog/">Blog</a></li>
                        
                        <li><a href="/tags-output/Clojure/">Clojure</a></li>
                        
                        <li><a href="/tags-output/Haskell/">Haskell</a></li>
                        
                        <li><a href="/tags-output/Code/">Code</a></li>
                        
                        <li><a href="/tags-output/Terminals/">Terminals</a></li>
                        
                        <li><a href="/tags-output/Guide/">Guide</a></li>
                        
                        
                    </ul>
                </li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">


    <div class="row">
        <div class="col-lg-12">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">September 21, 2016</div>
        
    </div>
    <h2>Basics of Clojure - Watching an Atom (Part 5)</h2>
</div>
<div>
    
    <p>Watching an Atom is exactly what it sounds like. Adding a Watch on an Atom keeps track of your atom and monitors them and when a specific condition is met it will trigger some function and alert you to the change.</p><p>Lets say we have our player that starts off with 100 health and when he reaches zero health we want to be notified that the game is over. The way we would go about this is first by creating an atom for the player. We already learned this in part 4.</p><pre><code>&#40;def player &#40;atom {:hp 100}&#41;&#41; ;; creates the player health at 100.
</code></pre><p>Now we need a function that will lower the health of the player. We'll call this player-damage.</p><pre><code>&#40;defn player-damage &#91;val&#93;
  &#40;swap! player update-in &#91;:hp&#93; - val&#41;&#41; ;; lowers the health of the player.
</code></pre><p>Now that we have a way to lower the player's health we can now monitor the atom as we change the player's health. The new part where we create a watch for out atom. This is done by the add-watch function.</p><pre><code>&#40;defn watch-health &#91;key watch old new&#93;  ;; contains the old state and the new state.
  &#40;let &#91;hp &#40;:hp new&#41;&#93;
      &#40;if &#40;= 0 hp&#41;
    &#40;println &quot;You are now dead&quot;&#41;   ;; prints this if hp is equal to 0.
    &#40;println &quot;You are at&quot; hp &quot;health&quot;&#41;&#41;&#41;&#41;   ;; prints this if not 0.
    
&#40;add-watch player :health watch-health&#41;  ;; watch-health is the function used to monitor the player health.    
</code></pre><p>Now we can check if the atom is actually being watched.</p><pre><code>&#40;player-damage 50&#41; ;; now if you call this you'll see the hp being printed and than the second time it'll be zero and it'll drop into the negative healths.
</code></pre><p>Now the atom being monitored and we are notified when the health is dropped to 0. This can have all kinds of implementations that require watching a value drop or increase to a specific value and than a certain action being applied in this cause we only printed but we could do anything from programming things like automatically turning on an air conditioner if the temperature is a certain amount in the room or can watch for a specific time and alert you to something u have to do at that time. There is a wide varity of things that can be done with watch and is an extremely important feature.</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags-output/Clojure/">Clojure</a>
    
    <a href="/tags-output/Code/">Code</a>
    
    <a href="/tags-output/Guide/">Guide</a>
    
</div>


    <div id="prev-next">
        
        <a href="/posts-output/intro-to-haskell/">&laquo; Haskell - Introduction</a>
        
        
        <a class="right" href="/posts-output/basics-of-clojurepart4/">Basics of Clojure - Atoms (Part 4) &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//defunsm-github-io.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>
    </div>
    <footer>Copyright &copy;  SM Salman Hossain
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a>, <a href="http://clojure.org/">Clojure</a> and <a href="http://github.com/">Github</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
